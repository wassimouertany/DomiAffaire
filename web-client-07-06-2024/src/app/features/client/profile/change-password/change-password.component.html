<div class="content content--top-nav">
  <div class="intro-y flex items-center mt-8">
    <h2 class="text-lg font-medium mr-auto">Change Password</h2>
  </div>
  <div class="grid grid-cols-12 gap-6">
    <div
      class="col-span-12 lg:col-span-4 2xl:col-span-3 flex lg:block flex-col-reverse"
    >
      <div class="intro-y box mt-5">
        <div class="relative flex items-center p-5">
          <div class="w-12 h-12 image-fit">
            <img
              alt="user image"
              class="rounded-full"
              [src]="'data:image/png;base64,' + oldClient.image"
            />
          </div>
          <div class="ml-4 mr-auto">
            <div class="font-medium text-base">
              {{ oldClient.firstName }} {{ oldClient.lastName }}
            </div>
            <div class="text-slate-500">{{ oldClient.role }}</div>
          </div>
        </div>
        <div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400">
          <a
            class="flex items-center text-primary font-medium"
            routerLink="/client/profile"
          >
            <i class="fas fa-user w-4 h-4 mr-2"></i> View Profile
          </a>
        </div>
        <div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400">
          <a class="flex items-center" routerLink="/client/update-profile">
            <i class="fas fa-lock w-4 h-4 mr-2"></i> Update Profile
          </a>
        </div>
        <div
          class="p-5 border-t border-slate-200/60 dark:border-darkmode-400 flex"
        >
          <button type="button" class="btn btn-primary py-1 px-2">
            Delete account
          </button>
          <button
            type="button"
            class="btn btn-outline-secondary py-1 px-2 ml-auto"
            (click)="logout()"
          >
            <i class="fas fa-sign-out-alt mr-2"></i> logout
          </button>
        </div>
      </div>
    </div>
    <div class="col-span-12 lg:col-span-8 2xl:col-span-9">
      <div class="intro-y box lg:mt-5">
        <div
          class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"
        >
          <h2 class="font-medium text-base mr-auto">Change Password</h2>
        </div>
        <div class="p-5">
          <div class="flex flex-col-reverse xl:flex-row flex-col">
            <div class="flex-1 mt-6 xl:mt-0">
              <form [formGroup]="chnagePswdForm" (ngSubmit)="changePswd()">
                <div class="grid grid-cols-12 gap-x-5">
                  <div class="col-span-12 2xl:col-span-6">
                    <div class="mt-3">
                      <label for="oldPassword" class="form-label"
                        >Old Password</label
                      >
                      <div class="relative">
                        <input
                          formControlName="oldPassword"
                          id="oldPassword"
                          type="password"
                          class="form-control"
                          placeholder="Old Password"
                        />
                        <i
                          class="far toggle-password"
                          [ngClass]="
                            passwordHidden['oldPassword']
                              ? 'fa-eye'
                              : 'fa-eye-slash'
                          "
                          (click)="togglePasswordVisibility('oldPassword')"
                        >
                        </i>
                      </div>
                    </div>
                    <div
                    *ngIf="
                      chnagePswdForm.get('oldPassword')!.invalid &&
                      chnagePswdForm.get('oldPassword')!.touched
                    "
                  >
                    <div
                      *ngIf="
                        chnagePswdForm.get('oldPassword')?.hasError('required')
                      "
                    >
                      {{
                        toastService.showToast(
                          "warning",
                          "Old password is required"
                        )
                      }}
                    </div>
                    
                    
                  </div>
                    <div class="mt-3">
                      <label for="newPassword" class="form-label"
                        >New Password</label
                      > 
                      <div class="relative">
                        <input
                          formControlName="newPassword"
                          id="newPassword"
                          type="password"
                          class="form-control"
                          placeholder="New Password"
                        />
                        <i
                          class="far toggle-password"
                          [ngClass]="
                            passwordHidden['newPassword']
                              ? 'fa-eye'
                              : 'fa-eye-slash'
                          "
                          (click)="togglePasswordVisibility('newPassword')"
                        >
                        </i>
                      </div>
                    </div>
                    <div
                        *ngIf="
                          chnagePswdForm.get('newPassword')!.invalid &&
                          chnagePswdForm.get('newPassword')!.touched
                        "
                      >
                        <div
                          *ngIf="
                            chnagePswdForm.get('newPassword')?.hasError('required')
                          "
                        >
                          {{
                            toastService.showToast(
                              "warning",
                              "New password is required"
                            )
                          }}
                        </div>
                        <div
                          *ngIf="
                            chnagePswdForm.get('newPassword')?.hasError('minlength')
                          "
                        >
                          {{
                            toastService.showToast(
                              "warning",
                              "New password must be at least 8 characters long"
                            )
                          }}
                        </div>
                        
                      </div>
                    <div class="mt-3">
                      <label for="confirmPassword" class="form-label"
                        >Confirm Password</label
                      >
                      <div class="relative">
                        <input
                          formControlName="confirmPassword"
                          id="confirmPassword"
                          type="password"
                          class="form-control"
                          placeholder="Confirm Password"
                        />
                        <i
                          class="far toggle-password"
                          [ngClass]="
                            passwordHidden['confirmPassword']
                              ? 'fa-eye'
                              : 'fa-eye-slash'
                          "
                          (click)="togglePasswordVisibility('confirmPassword')"
                        >
                        </i>
                      </div>
                    </div>
                    <div
                        *ngIf="
                          chnagePswdForm.get('confirmPassword')!.invalid &&
                          chnagePswdForm.get('confirmPassword')!.touched
                        "
                      >
                        <div
                          *ngIf="
                            chnagePswdForm.get('confirmPassword')?.hasError('required')
                          "
                        >
                          {{
                            toastService.showToast(
                              "warning",
                              "Confirm password is required"
                            )
                          }}
                        </div>
                        <div
                          *ngIf="
                            chnagePswdForm.get('confirmPassword')?.hasError('minlength')
                          "
                        >
                          {{
                            toastService.showToast(
                              "warning",
                              "Confirm password must be at least 8 characters long"
                            )
                          }}
                        </div>
                        
                      </div>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary w-20 mt-3" [disabled]="!chnagePswdForm.valid">
                  Save
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
